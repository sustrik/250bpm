<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<head>
    <title>Bus Messaging Pattern - 250bpm</title>
    
    	<script type="text/javascript" src="http://www.wikidot.com/default__flow/login__CustomDomainScript?site_id=148706"></script>

    
    <script type="text/javascript" src="http://d3g0gp89917ko0.cloudfront.net/v--3e3a6f7dbcc9/common--javascript/init.combined.js"></script>
    <script  type="text/javascript">
        var URL_HOST = 'www.wikidot.com';
        var URL_DOMAIN = 'wikidot.com';
        var USE_SSL =  true ;
        var URL_STATIC = 'http://d3g0gp89917ko0.cloudfront.net/v--3e3a6f7dbcc9';
        // global request information
        
        var WIKIREQUEST = {};
        WIKIREQUEST.info = {};
        
        WIKIREQUEST.info.domain = "250bpm.com";
        WIKIREQUEST.info.siteId = 148706;
        WIKIREQUEST.info.siteUnixName = "250bpm";
        WIKIREQUEST.info.categoryId = 2550760;
        WIKIREQUEST.info.themeId = 18520;
        WIKIREQUEST.info.requestPageName = "blog:17";
        OZONE.request.timestamp = 1594263509;
        OZONE.request.date = new Date();
        WIKIREQUEST.info.lang = 'en';
                WIKIREQUEST.info.pageUnixName = "blog:17";
        WIKIREQUEST.info.pageId = 16451419;
                        WIKIREQUEST.info.lang = "en";
        OZONE.lang = "en";
        var isUAMobile = !!/Android|webOS|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
    </script>
    
    


    
        <script  type="text/javascript">
    
        require.config({
            baseUrl: URL_STATIC + '/common--javascript',
            paths: {
                'jquery.ui': 'jquery-ui.min',
                'jquery.form': 'jquery.form'
            }
        });
    
    </script>
    
    <meta http-equiv="content-type" content="text/html;charset=UTF-8"/>
            
    
    
    
    
    <meta http-equiv="content-language" content="en"/>
    <script type="text/javascript" src="http://d3g0gp89917ko0.cloudfront.net/v--3e3a6f7dbcc9/common--javascript/WIKIDOT.combined.js"></script>
        
    
    <style type="text/css" id="internal-style">
        
        /* modules */
        
                
        /* theme */
                    @import url(http://d3g0gp89917ko0.cloudfront.net/v--3e3a6f7dbcc9/common--theme/base/css/style.css);
                    @import url(http://250bpm.wdfiles.com/local--theme/250bpm/style.css);
            </style>
    
        
        
        
    <link rel="shortcut icon" href="/local--favicon/favicon.gif"/>
    <link rel="icon" type="image/gif" href="/local--favicon/favicon.gif"/>
    
            <link rel="apple-touch-icon" href="/common--images/apple-touch-icon-57x57.png" />
        <link rel="apple-touch-icon" sizes="72x72" href="/common--images/apple-touch-icon-72x72.png" />
        <link rel="apple-touch-icon" sizes="114x114" href="/common--images/apple-touch-icon-114x114.png" />
        
        
            <link rel="alternate" type="application/wiki" title="Edit this page" href="javascript:WIKIDOT.page.listeners.editClick()"/>
    
        <script type="text/javascript">
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-18234656-1']);
        _gaq.push(['_setDomainName', 'none']);
        _gaq.push(['_setAllowLinker', true]);
        _gaq.push(['_trackPageview']);

        _gaq.push(['old._setAccount', 'UA-68540-5']);
        _gaq.push(['old._setDomainName', 'none']);
        _gaq.push(['old._setAllowLinker', true]);
        _gaq.push(['old._trackPageview']);

                _gaq.push(['userTracker._setAccount', 'UA-3207370-9']);
        _gaq.push(['userTracker._trackPageview']);
            </script>
    
    <script type="text/javascript">
        window.google_analytics_uacct = 'UA-18234656-1';
        window.google_analytics_domain_name = 'none';
    </script>
    
        <link rel="manifest" href="/onesignal/manifest.json" />
    <script src="https://cdn.onesignal.com/sdks/OneSignalSDK.js" acync=""></script>
    <script>
        var OneSignal = window.OneSignal || [];
        OneSignal.push(function() {
          OneSignal.init({
            appId: null,
          });
        });
    </script>
        
<link rel="alternate" type="application/rss+xml" title="Comments for the page &quot;Bus Messaging Pattern&quot;" href="/feed/page/comments-16451419.xml"/><script type="text/javascript" src="http://d3g0gp89917ko0.cloudfront.net/v--3e3a6f7dbcc9/common--modules/js/forum/ForumCommentsModule.js"></script>
<script type="text/javascript" src="http://d3g0gp89917ko0.cloudfront.net/v--3e3a6f7dbcc9/common--modules/js/forum/ForumViewThreadModule.js"></script>
<script type="text/javascript" src="http://d3g0gp89917ko0.cloudfront.net/v--3e3a6f7dbcc9/common--modules/js/forum/ForumViewThreadPostsModule.js"></script>
<script type="text/javascript" src="http://d3g0gp89917ko0.cloudfront.net/v--3e3a6f7dbcc9/common--modules/js/forum/sub/ForumNewPostFormModule.js"></script>
</head>
<body id="html-body">
<div id="skrollr-body">
<a name="page-top"></a>





<div id="container-wrap-wrap">
    <div id="container-wrap">
        <div id="container">
            <div id="header">
              <h1><a href="/"><span>250bpm</span></a></h1>
                
                
                <!-- google_ad_section_start(weight=ignore) -->
                
                <div id="search-top-box" class="form-search">
    <form id="search-top-box-form" action="dummy" class="input-append">
        <input id="search-top-box-input" class="text empty search-query" type="text" size="15" name="query" value="Search this site" onfocus="if(YAHOO.util.Dom.hasClass(this, 'empty')){YAHOO.util.Dom.removeClass(this,'empty'); this.value='';}"/><input class="button btn" type="submit" name="search" value="Search"/>
    </form>
</div>
                
                
                    <div id="top-bar">
                        

<ul>
<li><a href="/">Home</a></li>
<li><a href="https://github.com/sustrik/cartesian">Cartesian</a></li>
<li><a href="http://libdill.org">Libdill</a></li>
<li><a href="http://nanomsg.org">Nanomsg</a></li>
<li><a href="https://github.com/sustrik/tiles">Tiles</a></li>
<li><a href="http://zero.mq">ZeroMQ</a></li>
<li><a href="/contact">Contact</a></li>
</ul>

                    </div>
                
                <div id="login-status"><a href="javascript:;" onclick="WIKIDOT.page.listeners.createAccount(event)" class="login-status-create-account btn">Create account</a> <span>or</span> <a href="javascript:;" onclick="WIKIDOT.page.listeners.loginClick(event)" class="login-status-sign-in btn btn-primary">Sign in</a> </div>
                <div id="header-extra-div-1"><span></span></div><div id="header-extra-div-2"><span></span></div><div id="header-extra-div-3"><span></span></div>
            </div>
            
            <div id="content-wrap">
                
                    <div id="side-bar">
                        


                        


                        


                    </div>
                
                
                <!-- google_ad_section_end -->
                
                <div id="main-content">
                    <div id="action-area-top"></div>
                    
                    
                        <div id="page-title">
                            Bus Messaging Pattern
                        </div>
                    

                    

                    



                    <div id="page-content">
                        

<div style="width:50em"><div class="list-pages-box">    <div class="list-pages-item">


<p><strong>Previous:</strong> <a href="/blog:16">Implementing Network Protocols in User Space</a></p>
</div>
    
    
    
    </div><div class="list-pages-box">    <div class="list-pages-item">


<p><strong>Next:</strong> <a href="/blog:18">Messaging &amp; Multiplexing</a></p>
</div>
    
    
    
    </div>
<p>The idea underlying &quot;bus&quot; messaging pattern is to provide the semantics similar to those of the hardware bus &#8212; everyone connected to the bus gets any data sent to the bus &#8212; just to do so on the higher layer. So, to use messaging terminology, everyone connected to the message bus gets any message sent to the bus.</p>
<div class="image-container aligncenter"><img src="http://250bpm.wdfiles.com/local--files/blog:17/bus1.png" alt="bus1.png" class="image" /></div>
<p>This pattern doesn't scale well &#8212; at some point the number of applications connected to the bus will grow to the point where they will be overloaded by sheer amount of messages they produce. However, the pattern is widely used in some industries (stock trading) in IPC (messaging passing within a single machine) and local (broadcasting data on single LAN) environments. The assumption is that the bus topology is fully controlled by the admins and is never left to scale beyond the point where it breaks.</p>
<p>Given the wide usage of the pattern, new experimental bus protocol was added to <a href="http://nanomsg.org">nanomsg</a> library. The protocol, due to its symmetrical nature, provides just one socket type named NN_BUS. If the topology is set up right (there are paths between each two nodes in the topology) any message sent to NN_BUS socket should be received by all the other NN_BUS sockets in the topology, but not by the sender itself.</p>
<div class="image-container aligncenter"><img src="http://250bpm.wdfiles.com/local--files/blog:17/bus2.png" alt="bus2.png" class="image" /></div>
<p>And a simple example of the usage of the bus socket:</p>
<div class="code">
<pre>
<code>#include &lt;nanomsg/nn.h&gt;
#include &lt;nanomsg/bus.h&gt;

int main ()
{
    int s = nn_socket (AF_SP, NN_BUS);
    nn_connect (s, &quot;tcp://192.168.0.111:5555&quot;);
    nn_send (s, &quot;ABC&quot;, 3, 0);
    nn_close (s);
    return 0;
}</code>
</pre></div>
<p>Note that as with any other broadcasting pattern, the message transfer is not reliable. If it was, single slow, dead or malevolent application would be able block the whole topology.</p>
<p>While the semantics of bus protocol are fairly simple, special care is needed to make it work for all possible configurations of the topology: multicast vs. unicast transports, broker-based vs. broker-less topologies, joining multiple partial buses using intermediate devices etc.</p>
<p>First, let's have a look at two trivial examples with no intermediate devices.</p>
<p>The multicast scenario is pretty straightforward:</p>
<div class="image-container aligncenter"><img src="http://250bpm.wdfiles.com/local--files/blog:17/bus3.png" alt="bus3.png" class="image" /></div>
<p>The only special case to take into account is whether the underlying multicast transport delivers messages back to the sender. If so, the assumption that NN_BUS socket doesn't receive messages that it itself had sent won't hold. So, it's important that implementation of such multicast transport filters out messages sent by itself. It should be relatively easy to do, for example, by filtering based on source IP address.</p>
<p>Another trivial setup is to connect any node with any other node in the topology by TCP connections. That of course means a lot of connections, but this kind of setup is sometimes used in small deployments (3-4 boxes):</p>
<div class="image-container aligncenter"><img src="http://250bpm.wdfiles.com/local--files/blog:17/bus4.png" alt="bus4.png" class="image" /></div>
<p>This setup should just work with no special cases to take care of.</p>
<p>Now, let's have a look at some non-trivial topologies. The most common one is to have a broker (device) in the middle. Every application will connect to the device, which in turn will broadcast every message to every application except for the one that sent it.</p>
<p>To build a device, as is the case with any other scalability protocol, you need a special low-level or &quot;raw&quot; version of NN_BUS socket.</p>
<div class="code">
<pre>
<code>s = nn_socket (AF_SP_RAW, NN_BUS);</code>
</pre></div>
<p>The semantics of such socket are following:</p>
<ol>
<li>When receiving a message, message is tagged by ID of the connection is was received on.</li>
<li>When sending a message, it is sent to all the connections except for the one identified in the message tag.</li>
</ol>
<p>I believe it's quite obvious how that works. One special aspect though is that due to fully symmetrical nature of bus protocol, intermediate devices &#8212; unlike devices for other scalability protocols &#8212; need just one socket, not two of them. Messages are simply received from the socket and sent back to it:</p>
<div class="image-container aligncenter"><img src="http://250bpm.wdfiles.com/local--files/blog:17/bus5.png" alt="bus5.png" class="image" /></div>
<p>Finally, let's have a look how two partial buses can be joined into a single bus using an intermediate device. Note how raw bus socket semantics allow messages from one sub-bus to pass through the device to the other sub-bus, but prevent them to be republished to the original sub-bus:</p>
<div class="image-container aligncenter"><img src="http://250bpm.wdfiles.com/local--files/blog:17/bus6.png" alt="bus6.png" class="image" /></div>
<p>The above is the first attempt to formalise bus pattern as a scalability protocol. The solution may still have its shortcomings. Any help with identifying the deficiencies of the protocol would be appreciated!</p>
<p><strong>Martin SÃºstrik, February 19th, 2013</strong></p>
<div class="list-pages-box">    <div class="list-pages-item">


<p><strong>Previous:</strong> <a href="/blog:16">Implementing Network Protocols in User Space</a></p>
</div>
    
    
    
    </div><div class="list-pages-box">    <div class="list-pages-item">


<p><strong>Next:</strong> <a href="/blog:18">Messaging &amp; Multiplexing</a></p>
</div>
    
    
    
    </div>
<div style="height:2em"></div>
<div class="comments-box">
		
	<div class="options" id="comments-options-hidden" style="display: none">
		<a href="javascript:;" onclick="WIKIDOT.modules.ForumCommentsModule.listeners.showComments(event)">Show Comments</a> 
	</div>
		
	<div id="thread-container" class="thread-container" style="margin-top: 1em">
					


<script type="text/javascript">
	WIKIDOT.forumThreadId = 626173;
</script>


	<div class="options" id="comments-options-shown">
		<a href="javascript:;" onclick="WIKIDOT.modules.ForumCommentsModule.listeners.hideComments(event)" class="btn btn-default btn-small btn-sm">Hide All Comments</a> 
		<a href="javascript:;" onclick="WIKIDOT.modules.ForumViewThreadModule.listeners.unfoldAll(event)" class="btn btn-default btn-small btn-sm">Unfold All</a> 
		<a href="javascript:;" onclick="WIKIDOT.modules.ForumViewThreadModule.listeners.foldAll(event)" class="btn btn-default btn-small btn-sm">Fold All</a>
	</div>

<div id="thread-container-posts" style="display: none">
    



	
					
      
    <div class="post-container" id="fpc-1800099">
                      
		<div class="post" id="post-1800099">
		<div class="long">
			<div class="head">
									<div class="options">
						<a href="javascript:;" onclick="togglePostFold(event,1800099)" class="btn btn-default btn-small btn-sm">Fold</a>
					</div>
								<div class="title" id="post-title-1800099">
																		
															</div>
				<div class="info">
					<span class="printuser avatarhover"><a href="javascript:;"><img class="small" src="http://www.gravatar.com/avatar.php?gravatar_id=4ae01bb10ed9614d022363ed2b75fda6&amp;default=http://www.wikidot.com/common--images/avatars/default/a16.png&amp;size=16" alt=""/></a>Aaron Evers (guest)</span> <span class="odate time_1371652069 format_%25e%20%25b%20%25Y%2C%20%25H%3A%25M%7Cagohover">19 Jun 2013 14:27</span>
														</div>
			</div>
			<div class="content" id="post-content-1800099">
									

<p>If all nodes on a bus are homogeneous, who binds the socket?</p>

							</div>

								
					
						<div class="options">
				
													<strong><a href="javascript:;" onclick="postReply(event,1800099)" class="btn btn-primary btn-small btn-sm">Reply</a></strong> 
																	<a href="javascript:;" onclick="togglePostOptions(event,1800099)" class="btn btn-default btn-small btn-sm">Options</a>
							</div>
									
			<div id="post-options-1800099" class="options" style="display: none">
			</div>
		</div>
		<div class="short">
							<a class="options btn btn-default btn-mini btn-xs" href="javascript:;" onclick="togglePostFold(event,1800099)" c>Unfold</a>
						<a class="title" href="javascript:;" onclick="togglePostFold(event,1800099)"></a> by <span class="printuser avatarhover"><a href="javascript:;"><img class="small" src="http://www.gravatar.com/avatar.php?gravatar_id=4ae01bb10ed9614d022363ed2b75fda6&amp;default=http://www.wikidot.com/common--images/avatars/default/a16.png&amp;size=16" alt=""/></a>Aaron Evers (guest)</span>, <span class="odate time_1371652069 format_%25e%20%25b%20%25Y%2C%20%25H%3A%25M%7Cagohover">19 Jun 2013 14:27</span>
		</div>
	</div>
 
                
                	


        
            </div>
 

	
					
      
    <div class="post-container" id="fpc-1800378">
                      
		<div class="post" id="post-1800378">
		<div class="long">
			<div class="head">
									<div class="options">
						<a href="javascript:;" onclick="togglePostFold(event,1800378)" class="btn btn-default btn-small btn-sm">Fold</a>
					</div>
								<div class="title" id="post-title-1800378">
																		
															</div>
				<div class="info">
					<span class="printuser avatarhover"><a href="http://www.wikidot.com/user:info/martin-sustrik" onclick="WIKIDOT.page.listeners.userInfo(939); return false;"  ><img class="small" src="http://www.wikidot.com/avatar.php?userid=939&amp;amp;size=small&amp;amp;timestamp=1594262460" alt="martin_sustrik" style="background-image:url(http://www.wikidot.com/userkarma.php?u=939)"/></a><a href="http://www.wikidot.com/user:info/martin-sustrik" onclick="WIKIDOT.page.listeners.userInfo(939); return false;" >martin_sustrik</a></span> <span class="odate time_1371670451 format_%25e%20%25b%20%25Y%2C%20%25H%3A%25M%7Cagohover">19 Jun 2013 19:34</span>
														</div>
			</div>
			<div class="content" id="post-content-1800378">
									

<p>User does. He decides which nodes are bound, which connect or which do both. However, after the topology is set up all the nodes act in the exactly same way.</p>

							</div>

								
					
						<div class="options">
				
													<strong><a href="javascript:;" onclick="postReply(event,1800378)" class="btn btn-primary btn-small btn-sm">Reply</a></strong> 
																	<a href="javascript:;" onclick="togglePostOptions(event,1800378)" class="btn btn-default btn-small btn-sm">Options</a>
							</div>
									
			<div id="post-options-1800378" class="options" style="display: none">
			</div>
		</div>
		<div class="short">
							<a class="options btn btn-default btn-mini btn-xs" href="javascript:;" onclick="togglePostFold(event,1800378)" c>Unfold</a>
						<a class="title" href="javascript:;" onclick="togglePostFold(event,1800378)"></a> by <span class="printuser avatarhover"><a href="http://www.wikidot.com/user:info/martin-sustrik" onclick="WIKIDOT.page.listeners.userInfo(939); return false;"  ><img class="small" src="http://www.wikidot.com/avatar.php?userid=939&amp;amp;size=small&amp;amp;timestamp=1594262460" alt="martin_sustrik" style="background-image:url(http://www.wikidot.com/userkarma.php?u=939)"/></a><a href="http://www.wikidot.com/user:info/martin-sustrik" onclick="WIKIDOT.page.listeners.userInfo(939); return false;" >martin_sustrik</a></span>, <span class="odate time_1371670451 format_%25e%20%25b%20%25Y%2C%20%25H%3A%25M%7Cagohover">19 Jun 2013 19:34</span>
		</div>
	</div>
 
                
        
            </div>
 

	
					
      
    <div class="post-container" id="fpc-1820607">
                      
		<div class="post" id="post-1820607">
		<div class="long">
			<div class="head">
									<div class="options">
						<a href="javascript:;" onclick="togglePostFold(event,1820607)" class="btn btn-default btn-small btn-sm">Fold</a>
					</div>
								<div class="title" id="post-title-1820607">
																		
															</div>
				<div class="info">
					<span class="printuser avatarhover"><a href="http://www.wikidot.com/user:info/julian-morrison" onclick="WIKIDOT.page.listeners.userInfo(1681959); return false;"  ><img class="small" src="http://www.wikidot.com/avatar.php?userid=1681959&amp;amp;size=small&amp;amp;timestamp=1594262460" alt="Julian Morrison" style="background-image:url(http://www.wikidot.com/userkarma.php?u=1681959)"/></a><a href="http://www.wikidot.com/user:info/julian-morrison" onclick="WIKIDOT.page.listeners.userInfo(1681959); return false;" >Julian Morrison</a></span> <span class="odate time_1374698324 format_%25e%20%25b%20%25Y%2C%20%25H%3A%25M%7Cagohover">24 Jul 2013 20:38</span>
														</div>
			</div>
			<div class="content" id="post-content-1820607">
									

<p>I think the need for a forwarding raw bus connecting each totally connected sub-bus makes this no use for a <em>friend to friend</em> topology (sparsely connected peers, no hub), and that's a pity.</p>
<p>What I wonder is, could this be extended to the more general case of a sparsely connected group, so every member still receives every message it didn't send, only once? Perhaps, each broadcast contains the ID of the sender, but also the IDs of the receivers, and a message UUID, so each recipient can forward it to its connections that aren't named (adding them to the list), and discard messages whose UUID it has seen (they looped around).</p>

							</div>

								
					
						<div class="options">
				
													<strong><a href="javascript:;" onclick="postReply(event,1820607)" class="btn btn-primary btn-small btn-sm">Reply</a></strong> 
																	<a href="javascript:;" onclick="togglePostOptions(event,1820607)" class="btn btn-default btn-small btn-sm">Options</a>
							</div>
									
			<div id="post-options-1820607" class="options" style="display: none">
			</div>
		</div>
		<div class="short">
							<a class="options btn btn-default btn-mini btn-xs" href="javascript:;" onclick="togglePostFold(event,1820607)" c>Unfold</a>
						<a class="title" href="javascript:;" onclick="togglePostFold(event,1820607)"></a> by <span class="printuser avatarhover"><a href="http://www.wikidot.com/user:info/julian-morrison" onclick="WIKIDOT.page.listeners.userInfo(1681959); return false;"  ><img class="small" src="http://www.wikidot.com/avatar.php?userid=1681959&amp;amp;size=small&amp;amp;timestamp=1594262460" alt="Julian Morrison" style="background-image:url(http://www.wikidot.com/userkarma.php?u=1681959)"/></a><a href="http://www.wikidot.com/user:info/julian-morrison" onclick="WIKIDOT.page.listeners.userInfo(1681959); return false;" >Julian Morrison</a></span>, <span class="odate time_1374698324 format_%25e%20%25b%20%25Y%2C%20%25H%3A%25M%7Cagohover">24 Jul 2013 20:38</span>
		</div>
	</div>
 
                
        
                      
    <div class="post-container" id="fpc-1820864">
                      
		<div class="post" id="post-1820864">
		<div class="long">
			<div class="head">
									<div class="options">
						<a href="javascript:;" onclick="togglePostFold(event,1820864)" class="btn btn-default btn-small btn-sm">Fold</a>
					</div>
								<div class="title" id="post-title-1820864">
																		
															</div>
				<div class="info">
					<span class="printuser avatarhover"><a href="http://www.wikidot.com/user:info/martin-sustrik" onclick="WIKIDOT.page.listeners.userInfo(939); return false;"  ><img class="small" src="http://www.wikidot.com/avatar.php?userid=939&amp;amp;size=small&amp;amp;timestamp=1594262460" alt="martin_sustrik" style="background-image:url(http://www.wikidot.com/userkarma.php?u=939)"/></a><a href="http://www.wikidot.com/user:info/martin-sustrik" onclick="WIKIDOT.page.listeners.userInfo(939); return false;" >martin_sustrik</a></span> <span class="odate time_1374734755 format_%25e%20%25b%20%25Y%2C%20%25H%3A%25M%7Cagohover">25 Jul 2013 06:45</span>
														</div>
			</div>
			<div class="content" id="post-content-1820864">
									

<p>Sorry, I don't follow. How is that different from what's already implemented? Are you asking for cycle prevention to be added to the existing algo?</p>

							</div>

								
							<div class="changes">
					Last edited on <span class="odate time_1374734793 format_%25e%20%25b%20%25Y%2C%20%25H%3A%25M%7Cagohover">25 Jul 2013 06:46</span>
					by <span class="printuser"><a href="http://www.wikidot.com/user:info/martin-sustrik" onclick="WIKIDOT.page.listeners.userInfo(939); return false;" >martin_sustrik</a></span>
					<a href="javascript:;" onclick="WIKIDOT.modules.ForumViewThreadModule.listeners.showHistory(event,1820864)"><i class="icon-plus"></i> Show more</a>
				</div>
				<div class="revisions" style="display: none"></div>
					
						<div class="options">
				
													<strong><a href="javascript:;" onclick="postReply(event,1820864)" class="btn btn-primary btn-small btn-sm">Reply</a></strong> 
																	<a href="javascript:;" onclick="togglePostOptions(event,1820864)" class="btn btn-default btn-small btn-sm">Options</a>
							</div>
									
			<div id="post-options-1820864" class="options" style="display: none">
			</div>
		</div>
		<div class="short">
							<a class="options btn btn-default btn-mini btn-xs" href="javascript:;" onclick="togglePostFold(event,1820864)" c>Unfold</a>
						<a class="title" href="javascript:;" onclick="togglePostFold(event,1820864)"></a> by <span class="printuser avatarhover"><a href="http://www.wikidot.com/user:info/martin-sustrik" onclick="WIKIDOT.page.listeners.userInfo(939); return false;"  ><img class="small" src="http://www.wikidot.com/avatar.php?userid=939&amp;amp;size=small&amp;amp;timestamp=1594262460" alt="martin_sustrik" style="background-image:url(http://www.wikidot.com/userkarma.php?u=939)"/></a><a href="http://www.wikidot.com/user:info/martin-sustrik" onclick="WIKIDOT.page.listeners.userInfo(939); return false;" >martin_sustrik</a></span>, <span class="odate time_1374734755 format_%25e%20%25b%20%25Y%2C%20%25H%3A%25M%7Cagohover">25 Jul 2013 06:45</span>
		</div>
	</div>
 
                
        
                      
    <div class="post-container" id="fpc-1821428">
                      
		<div class="post" id="post-1821428">
		<div class="long">
			<div class="head">
									<div class="options">
						<a href="javascript:;" onclick="togglePostFold(event,1821428)" class="btn btn-default btn-small btn-sm">Fold</a>
					</div>
								<div class="title" id="post-title-1821428">
																		
															</div>
				<div class="info">
					<span class="printuser avatarhover"><a href="http://www.wikidot.com/user:info/julian-morrison" onclick="WIKIDOT.page.listeners.userInfo(1681959); return false;"  ><img class="small" src="http://www.wikidot.com/avatar.php?userid=1681959&amp;amp;size=small&amp;amp;timestamp=1594262460" alt="Julian Morrison" style="background-image:url(http://www.wikidot.com/userkarma.php?u=1681959)"/></a><a href="http://www.wikidot.com/user:info/julian-morrison" onclick="WIKIDOT.page.listeners.userInfo(1681959); return false;" >Julian Morrison</a></span> <span class="odate time_1374796679 format_%25e%20%25b%20%25Y%2C%20%25H%3A%25M%7Cagohover">25 Jul 2013 23:57</span>
														</div>
			</div>
			<div class="content" id="post-content-1821428">
									

<p>To give an example, the following topology: A connected to B and C, C connected to D, D connected to E, E connected to F, B connected to E. There is no direct routing between any pair that aren't connected - perhaps they aren't even on the same IP namespace (and might collide IP usage, say A and E both think they are 10.0.0.1), being two-peer LANs created with OpenVPN.</p>
<p>I suppose this could be created by bridging every pair with raw bus. But it would be nice if the sockets could be made to just link up like that.</p>
<p>Or am I misreading it, and it would already be OK to link them up like that?</p>

							</div>

								
					
						<div class="options">
				
													<strong><a href="javascript:;" onclick="postReply(event,1821428)" class="btn btn-primary btn-small btn-sm">Reply</a></strong> 
																	<a href="javascript:;" onclick="togglePostOptions(event,1821428)" class="btn btn-default btn-small btn-sm">Options</a>
							</div>
									
			<div id="post-options-1821428" class="options" style="display: none">
			</div>
		</div>
		<div class="short">
							<a class="options btn btn-default btn-mini btn-xs" href="javascript:;" onclick="togglePostFold(event,1821428)" c>Unfold</a>
						<a class="title" href="javascript:;" onclick="togglePostFold(event,1821428)"></a> by <span class="printuser avatarhover"><a href="http://www.wikidot.com/user:info/julian-morrison" onclick="WIKIDOT.page.listeners.userInfo(1681959); return false;"  ><img class="small" src="http://www.wikidot.com/avatar.php?userid=1681959&amp;amp;size=small&amp;amp;timestamp=1594262460" alt="Julian Morrison" style="background-image:url(http://www.wikidot.com/userkarma.php?u=1681959)"/></a><a href="http://www.wikidot.com/user:info/julian-morrison" onclick="WIKIDOT.page.listeners.userInfo(1681959); return false;" >Julian Morrison</a></span>, <span class="odate time_1374796679 format_%25e%20%25b%20%25Y%2C%20%25H%3A%25M%7Cagohover">25 Jul 2013 23:57</span>
		</div>
	</div>
 
                
        
            </div>
 
            </div>
 
            </div>
 

	
					
      
    <div class="post-container" id="fpc-2426879">
                      
		<div class="post" id="post-2426879">
		<div class="long">
			<div class="head">
									<div class="options">
						<a href="javascript:;" onclick="togglePostFold(event,2426879)" class="btn btn-default btn-small btn-sm">Fold</a>
					</div>
								<div class="title" id="post-title-2426879">
																		
															</div>
				<div class="info">
					<span class="printuser avatarhover"><a href="javascript:;"><img class="small" src="http://www.gravatar.com/avatar.php?gravatar_id=0839bed78f8f75c8cca3d4477a7fa637&amp;default=http://www.wikidot.com/common--images/avatars/default/a16.png&amp;size=16" alt=""/></a>donpdonp (guest)</span> <span class="odate time_1450548161 format_%25e%20%25b%20%25Y%2C%20%25H%3A%25M%7Cagohover">19 Dec 2015 18:02</span>
														</div>
			</div>
			<div class="content" id="post-content-2426879">
									

<p>I set up three processes using bus and tcp and the communication pattern is not as expected.</p>
<p>p1 listens. p2 dials p1. p3 dials p1.</p>
<p>p2 send(&quot;hello&quot;). p1 hears &quot;hello&quot;. p3 hears nothing.</p>
<p>I was expecting p1 and p3 to hear anything sent from p2.</p>
<p>From the bus code examples it looks like all nodes are required to be a tcp listener and tcp connect to every other node. If thats the case then how is this different than pubsub? I was expecting to use the tcp channels in both directions. Having to build a mesh of one-way links seems unnecessary when p1 already has a two-way connection to p2 and p3.</p>
<p>Thanks!</p>

							</div>

								
					
						<div class="options">
				
													<strong><a href="javascript:;" onclick="postReply(event,2426879)" class="btn btn-primary btn-small btn-sm">Reply</a></strong> 
																	<a href="javascript:;" onclick="togglePostOptions(event,2426879)" class="btn btn-default btn-small btn-sm">Options</a>
							</div>
									
			<div id="post-options-2426879" class="options" style="display: none">
			</div>
		</div>
		<div class="short">
							<a class="options btn btn-default btn-mini btn-xs" href="javascript:;" onclick="togglePostFold(event,2426879)" c>Unfold</a>
						<a class="title" href="javascript:;" onclick="togglePostFold(event,2426879)"></a> by <span class="printuser avatarhover"><a href="javascript:;"><img class="small" src="http://www.gravatar.com/avatar.php?gravatar_id=0839bed78f8f75c8cca3d4477a7fa637&amp;default=http://www.wikidot.com/common--images/avatars/default/a16.png&amp;size=16" alt=""/></a>donpdonp (guest)</span>, <span class="odate time_1450548161 format_%25e%20%25b%20%25Y%2C%20%25H%3A%25M%7Cagohover">19 Dec 2015 18:02</span>
		</div>
	</div>
 
                
        
                      
    <div class="post-container" id="fpc-4175716">
                      
		<div class="post" id="post-4175716">
		<div class="long">
			<div class="head">
									<div class="options">
						<a href="javascript:;" onclick="togglePostFold(event,4175716)" class="btn btn-default btn-small btn-sm">Fold</a>
					</div>
								<div class="title" id="post-title-4175716">
																		
															</div>
				<div class="info">
					<span class="printuser avatarhover"><a href="http://www.wikidot.com/user:info/nanjj" onclick="WIKIDOT.page.listeners.userInfo(5222301); return false;"  ><img class="small" src="http://www.wikidot.com/avatar.php?userid=5222301&amp;amp;size=small&amp;amp;timestamp=1594262460" alt="nanjj" style="background-image:url(http://www.wikidot.com/userkarma.php?u=5222301)"/></a><a href="http://www.wikidot.com/user:info/nanjj" onclick="WIKIDOT.page.listeners.userInfo(5222301); return false;" >nanjj</a></span> <span class="odate time_1551926087 format_%25e%20%25b%20%25Y%2C%20%25H%3A%25M%7Cagohover">07 Mar 2019 02:34</span>
														</div>
			</div>
			<div class="content" id="post-content-4175716">
									

<p>in your pattern, only p1 connects directly to p2, so p2 hello, p1 heard.</p>
<p>you can try: p1, p2, p3 listen, p1 dial p2, p2 dial p3, p3 dial p1. so anyone send, the other two receive.</p>
<p>If you using pubsub, say p1 pub, p2, p3 sub. Only p1 can send, p2 and p3 can receive.</p>

							</div>

								
					
						<div class="options">
				
													<strong><a href="javascript:;" onclick="postReply(event,4175716)" class="btn btn-primary btn-small btn-sm">Reply</a></strong> 
																	<a href="javascript:;" onclick="togglePostOptions(event,4175716)" class="btn btn-default btn-small btn-sm">Options</a>
							</div>
									
			<div id="post-options-4175716" class="options" style="display: none">
			</div>
		</div>
		<div class="short">
							<a class="options btn btn-default btn-mini btn-xs" href="javascript:;" onclick="togglePostFold(event,4175716)" c>Unfold</a>
						<a class="title" href="javascript:;" onclick="togglePostFold(event,4175716)"></a> by <span class="printuser avatarhover"><a href="http://www.wikidot.com/user:info/nanjj" onclick="WIKIDOT.page.listeners.userInfo(5222301); return false;"  ><img class="small" src="http://www.wikidot.com/avatar.php?userid=5222301&amp;amp;size=small&amp;amp;timestamp=1594262460" alt="nanjj" style="background-image:url(http://www.wikidot.com/userkarma.php?u=5222301)"/></a><a href="http://www.wikidot.com/user:info/nanjj" onclick="WIKIDOT.page.listeners.userInfo(5222301); return false;" >nanjj</a></span>, <span class="odate time_1551926087 format_%25e%20%25b%20%25Y%2C%20%25H%3A%25M%7Cagohover">07 Mar 2019 02:34</span>
		</div>
	</div>
 
                
        
            </div>
 
            </div>
 



</div>

        <a href="javascript:;" id="new-post-button" onclick="WIKIDOT.modules.ForumViewThreadModule.listeners.newPost(event,null)"
      style="display:  none ; margin-bottom:1em"
    >Add a New Comment</a>


    <div id="new-post-form-container">
        <div id="new-post-preview-div" style="display: none">
            <h1>Post preview:</h1>
            <div class="post-container"></div>
            <div></div>
            <a href="javascript:;" onclick="WIKIDOT.modules.ForumNewPostFormModule.listeners.closePreview(event)" class="btn btn-danger">Close preview</a>
        </div>

        <div id="new-post-div" class="well">
            <form id="new-post-form" onkeypress="return OZONE.utils.disableEnterKey(event)">
                <input type="hidden" name="threadId" value="626173"/>
                <input type="hidden" name="parentId" value=""/>
                                    <table class="guest-commenting">
                        <tr>
                            <td><input class="text form-control" name="guestName" type="text" maxlength="30" value="" title="Name"/></td>
                            <td>or <a href="#action:login">Sign in as Wikidot user</a></td>
                        </tr>
                        <tr>
                            <td><input class="text form-control" name="guestEmail" type="text" maxlength="50" value="" title="E-mail address"/></td>
                            <td>(will not be published)</td>
                        </tr>
                    </table>
                                <div><textarea id="np-text" name="source" rows="10" cols="50" class="form-control"></textarea></div>
                <div class="change-textarea-size">
                    <a href="javascript:;" onclick="WIKIDOT.utils.changeTextareaRowNo('np-text',-5)">-</a>
                    <a href="javascript:;" onclick="WIKIDOT.utils.changeTextareaRowNo('np-text',5)">+</a>
                </div>
                <div class="edit-help-34">
                    Help: <a href="http://www.wikidot.com/doc:quick-reference" target="_blank">wiki text quick reference</a>                </div>
                                
                <div id="edit-post-captcha"></div>
                
                <div class="buttons alignleft">
                    <input class="btn btn-danger btn-small btn-sm" type="button" value="Cancel" id="np-cancel" onclick="WIKIDOT.modules.ForumNewPostFormModule.listeners.cancel(event)"/>
                    <input class="btn btn-default btn-small btn-sm" type="button" value="Preview" id="np-preview" onclick="WIKIDOT.modules.ForumNewPostFormModule.listeners.preview(event)"/>
                    <input class="btn btn-primary btn-small btn-sm" type="button" value="Post it" id="np-post" onclick="WIKIDOT.modules.ForumNewPostFormModule.listeners.save(event)"/>
                </div>
                    
            </form>
        </div>	

    </div> 
            <script type="text/javascript">
            
            $j(function() {
                WIKIDOT.Editor.init("np-text", "np-editor-panel");
            });
            
        </script>
    
 

<div style="display:none" id="post-options-template">
	<a href="javascript:;" onclick="WIKIDOT.modules.ForumViewThreadModule.listeners.showPermalink(event,'%POST_ID%')" class="btn btn-default btn-small btn-sm">Permanent Link</a>
			<a href="javascript:;" onclick="WIKIDOT.modules.ForumViewThreadModule.listeners.editPost(event,'%POST_ID%')" class="btn btn-default btn-small btn-sm">Edit</a>
			<a href="javascript:;" onclick="WIKIDOT.modules.ForumViewThreadModule.listeners.deletePost(event,'%POST_ID%')" class="btn btn-danger btn-small btn-sm">Delete</a>
</div>
	
			</div>
	
	
	
</div></div>

                    </div>

                    


                    



                    

                    <div id="page-info-break"></div>
                    
                        <div id="page-options-container">
                            
                        </div>
                    
                    <div id="action-area" style="display: none;"></div>
                </div>
            </div>
            
            
            
            <div id="footer" style="display: block; visibility: visible;">
                <div class="options" style="display: block; visibility: visible;">
    <a href="http://www.wikidot.com/doc" id="wikidot-help-button">Help</a>
    &nbsp;|
    <a href="http://www.wikidot.com/legal:terms-of-service" id="wikidot-tos-button">Terms of Service</a>
    &nbsp;|
    <a href="http://www.wikidot.com/legal:privacy-policy" id="wikidot-privacy-button">Privacy</a>
    &nbsp;|
    <a href="javascript:;" id="bug-report-button" onclick="WIKIDOT.page.listeners.pageBugReport(event)">Report a bug</a>
    &nbsp;|
    <a href="javascript:;" id="abuse-report-button" onclick="WIKIDOT.page.listeners.flagPageObjectionable(event)">Flag as objectionable</a>
</div>
Powered by <a href="http://www.wikidot.com">Wikidot.com</a> 
            </div>
            
                <div id="license-area" class="license-area">
                    Unless otherwise stated, the content of this page is licensed under <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons Attribution-ShareAlike 3.0 License</a>
                </div>
            
            
            



            <div id="extrac-div-1"><span></span></div><div id="extrac-div-2"><span></span></div><div id="extrac-div-3"><span></span></div>
            
            
            
            
                
            
        </div>
        
    </div>
<!-- These extra divs/spans may be used as catch-alls to add extra imagery. -->
<div id="extra-div-1"><span></span></div><div id="extra-div-2"><span></span></div><div id="extra-div-3"><span></span></div>
<div id="extra-div-4"><span></span></div><div id="extra-div-5"><span></span></div><div id="extra-div-6"><span></span></div>
</div>




</div>
<div id="dummy-ondomready-block" style="display: none;" ></div>
    <!-- Google Analytics load -->
    <script type="text/javascript">
        (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'stats.g.doubleclick.net/dc.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();
    </script>

    <!-- Quantcast -->
    <script type="text/javascript">
    _qoptions={
        qacct:"p-edL3gsnUjJzw-"
    };
    (function() {
        var qc = document.createElement('script'); qc.type = 'text/javascript'; qc.async = true;
        qc.src = ('https:' == document.location.protocol ? 'https://secure' : 'http://edge') + '.quantserve.com/quant.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(qc, s);
    })();
    </script>
    <noscript>
        <img src="http://pixel.quantserve.com/pixel/p-edL3gsnUjJzw-.gif" style="display: none;" border="0" height="1" width="1" alt="Quantcast"/>
    </noscript>




<div id="page-options-bottom-tips" style="display: none;">
    <div id="edit-button-hovertip">
        Click here to edit contents of this page.    </div>
</div>
<div id="page-options-bottom-2-tips"  style="display: none;">
    <div id="edit-sections-button-hovertip">
        Click here to toggle editing of individual sections of the page (if possible).         Watch headings for an &quot;edit&quot; link when available.    </div>
    <div id="edit-append-button-hovertip">
        Append content without editing the whole page source.    </div>
    <div id="history-button-hovertip">
        Check out how this page has evolved in the past.    </div>
    <div id="discuss-button-hovertip">
        If you want to discuss contents of this page - this is the easiest way to do it.    </div>
    <div id="files-button-hovertip">
        View and manage file attachments for this page.    </div>
    <div id="site-tools-button-hovertip">
        A few useful tools to manage this Site.    </div>
    <div id="backlinks-button-hovertip">
        See pages that link to and include this page.    </div>
    <div id="rename-move-button-hovertip">
        Change the name (also URL address, possibly the category) of the page.    </div>
    <div id="view-source-button-hovertip">
        View wiki source for this page without editing.    </div>
    <div id="parent-page-button-hovertip">  
        View/set parent page (used for creating breadcrumbs and structured layout).    </div>
            <div id="abuse-report-button-hovertip">
            Notify administrators if there is objectionable content in this page.        </div>
        <div id="bug-report-button-hovertip">
            Something does not work as expected? Find out what you can do.        </div>
        <div id="wikidot-help-button-hovertip">
            General Wikidot.com documentation and help section.        </div>
        <div id="wikidot-tos-button-hovertip">
            Wikidot.com Terms of Service - what you can, what you should not etc.        </div>
        <div id="wikidot-privacy-button-hovertip">
            Wikidot.com Privacy Policy.          
        </div>
    </div>
</body>
</html>